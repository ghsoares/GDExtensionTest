[gd_scene load_steps=19 format=2]

[ext_resource path="res://Assets/Scripts/ParticleSystem2D/ParticleSystem2D.cs" type="Script" id=1]
[ext_resource path="res://Assets/Scripts/Platform.cs" type="Script" id=2]
[ext_resource path="res://Assets/Fonts/m5x7.tres" type="DynamicFont" id=3]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Modules/ParticleSystemEmitOptions.cs" type="Script" id=4]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Custom Modules/EmitPlane.cs" type="Script" id=5]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Modules/ParticleSystemEmitBurst.cs" type="Script" id=6]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Modules/ParticleSystemUpdateParticle.cs" type="Script" id=7]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Modules/ParticleSystemDrawMesh.cs" type="Script" id=8]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Modules/ParticleSystemSizeOverLife.cs" type="Script" id=9]
[ext_resource path="res://Assets/Scripts/ParticleSystem2D/Custom Modules/RandomHue.cs" type="Script" id=10]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform sampler2D gradient;
uniform float speed;

void fragment() {
	float t = TIME * speed;
	t = mod(t, 1f);
	
	vec4 c = texture(TEXTURE, UV) * texture(gradient, vec2(t, 0));
	
	COLOR *= c;
}



"

[sub_resource type="Gradient" id=2]
offsets = PoolRealArray( 0, 0.5, 1 )
colors = PoolColorArray( 1, 1, 1, 1, 1, 1, 1, 0.392157, 1, 1, 1, 1 )

[sub_resource type="GradientTexture" id=3]
gradient = SubResource( 2 )

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 1 )
shader_param/speed = 2.0
shader_param/gradient = SubResource( 3 )

[sub_resource type="RectangleShape2D" id=5]
extents = Vector2( 24, 1 )

[sub_resource type="Shader" id=6]
code = "shader_type canvas_item;

void fragment() {
	float d = distance(UV, vec2(.5f)) / .5f;
	COLOR.a = clamp(ceil(1f - d), 0, 1);
}"

[sub_resource type="ShaderMaterial" id=7]
shader = SubResource( 6 )

[sub_resource type="Curve" id=8]
_data = [ Vector2( 0, 1 ), 0.0, -1.0, 0, 1, Vector2( 1, 0 ), -1.0, 0.0, 1, 0 ]

[node name="Platform" type="StaticBody2D"]
z_index = 1
script = ExtResource( 2 )

[node name="Spr" type="ColorRect" parent="."]
material = SubResource( 4 )
margin_left = -24.0
margin_right = 24.0
margin_bottom = 2.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Col" type="CollisionShape2D" parent="."]
visible = false
position = Vector2( 0, 1 )
shape = SubResource( 5 )
disabled = true

[node name="Multiplier" type="Node2D" parent="."]
position = Vector2( 0, 4 )
z_index = 32

[node name="Text" type="Label" parent="Multiplier"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -20.0
margin_right = 20.0
margin_bottom = 13.0
custom_fonts/font = ExtResource( 3 )
text = "5x"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Landed" type="Node2D" parent="."]
material = SubResource( 7 )
script = ExtResource( 1 )
emitting = true
gravity = Vector2( 0, 0 )
onEditorSafeFPS = 2.0
maxParticles = 64
emitOnStart = false

[node name="EmitOptions" type="Node" parent="Landed"]
script = ExtResource( 4 )
maxSpeed = 20.0
minSpeed = 2.0
maxSize = 4.0
startColor = Color( 0.729412, 0.290196, 0.290196, 1 )

[node name="RandomHue" type="Node" parent="Landed"]
script = ExtResource( 10 )
randomHue = 0.05
randomSaturation = 0.0
randomValue = 0.0

[node name="EmitBurst" type="Node" parent="Landed"]
script = ExtResource( 6 )
rate = 0.5
minAmount = 32
maxAmount = 32

[node name="EmitPlane" type="Node" parent="Landed"]
script = ExtResource( 5 )
size = 24.0
directionRotationRange = Vector2( 0, 45 )

[node name="SizeOverLife" type="Node" parent="Landed"]
script = ExtResource( 9 )
curve = SubResource( 8 )

[node name="Update" type="Node" parent="Landed"]
script = ExtResource( 7 )

[node name="Draw" type="Node" parent="Landed"]
script = ExtResource( 8 )
